{
    "collab_server" : "",
    "contents" : "library(ggplot2)   # plotting on top of ggsoccer \nlibrary(ggsoccer)  # create soccer pitch overlay\nlibrary(dplyr)     # data manipulation\nlibrary(purrr)     # create multiple dataframes for tweenr\nlibrary(tweenr)    # build frames for animation\nlibrary(gganimate) # animate plots\nlibrary(extrafont) # insert custom fonts into plots\nlibrary(ggimage)   # insert images and emoji into plots\n\n# install.packages(\"https://cran.r-project.org/src/contrib/Archive/ggimage/ggimage_0.1.0.tar.gz\", repo=NULL, type=\"source\")\n\ndata <- data.frame(x = 1, y = 1)\n\nggplot(data) +\n  annotate_pitch() +\n  theme_pitch() +\n  coord_flip(xlim = c(49, 101),\n             ylim = c(-1, 101))\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsoccer)\nlibrary(extrafont)\nlibrary(ggimage)\nlibrary(countrycode)\n\ncornerkick_data <- data.frame(x = 99, y = 0.3,\n                              x2 = 94, y2 = 47)\n\nosako_gol <- data.frame(x = 94, y = 49,\n                        x2 = 100, y2 = 55.5)\n\nplayer_label <- data.frame(x = c(92, 99), \n                           y = c(49, 2))\n\nannotation_data <- data.frame(\n  x = c(110, 105, 70, 92, 53), \n  y = c(30, 30, 45, 81, 85),\n  hjust = c(0.5, 0.5, 0.5, 0.5, 0.5),\n  label = c(\"Japan             (2) vs. Colombia             (1)\",\n            \"Kagawa (PEN 6'), Quintero (39'), Osako (73')\",\n            \"Japan press their man advantage, substitute Honda\\ndelivers a delicious corner kick for Osako to (somehow) tower over\\nColombia's defense and flick a header into the far corner!\",\n            \"Bonus: Ospina looking confused and\\ndoing a lil' two-step-or-god-knows-what.\",\n            \"by Ryo Nakagawara (@R_by_Ryo)\")\n)\n\nflag_data <- data.frame(\n  x = c(110, 110),\n  y = c(13, 53),\n  team = c(\"japan\", \"colombia\")\n) %>% \n  mutate(\n    image = team %>% \n      countrycode(., origin = \"country.name\", destination = \"iso2c\")\n  ) %>% \n  select(-team)\n\nwc_logo <- data.frame(x = 107,\n                      y = 85) %>% \n  mutate(image = \"https://upload.wikimedia.org/wikipedia/en/thumb/6/67/2018_FIFA_World_Cup.svg/1200px-2018_FIFA_World_Cup.svg.png\")\n\nggplot(osako_gol) +\n  annotate_pitch() +\n  theme_pitch() +\n  theme(text = element_text(family = \"Dusha V5\"),\n        plot.margin=grid::unit(c(0,0,0,0), \"mm\")) +\n  coord_flip(xlim = c(55, 112),\n             ylim = c(-1, 101)) +\n  geom_curve(data = cornerkick_data,\n             aes(x = x, y = y, xend = x2, yend = y2),\n             curvature = -0.15, \n             arrow = arrow(length = unit(0.25, \"cm\"),\n                           type = \"closed\")) +\n  geom_segment(aes(x = x, y = y, xend = x2, yend = y2),\n               arrow = arrow(length = unit(0.25, \"cm\"),\n                             type = \"closed\")) +\n  geom_label(data = player_label, \n             aes(x = x, y = y),\n             label = c(\"Osako\", \"Honda\"), family = \"Dusha V5\") +\n  geom_point(aes(x = 98, y = 50), size = 3, color = \"green\") +\n  geom_text(aes(x = 99.7, y = 50), size = 5, label = \"???\", family = \"Dusha V5\") +\n  geom_text(data = annotation_data,\n            family = \"Dusha V5\", \n            aes(x = x, y = y,\n                hjust = hjust, label = label), \n            size = c(6.5, 4.5, 4, 3.5, 3)) +\n  ggimage::geom_flag(data = flag_data,\n                     aes(x = x, y = y,\n                         image = image),       \n                     size = c(0.08, 0.08)) +\n  ggimage::geom_emoji(aes(x = 95, \n                          y = 50),\n                      image = \"26bd\", size = 0.035) +\n  geom_image(data = wc_logo,\n             aes(x = x, y = y,\n                 image = image), size = 0.17)\n\n\n\npass_data <- data.frame(x = c( 84, 82),\n                        y = c(  6, 32),\n                        x2 = c(77, 84),\n                        y2 = c(13, 8))\n\n#                            corner kick + golovin cross\ncurve_data <- data.frame(x = c(100, 76),\n                         y = c(0, 19),\n                         x2 = c(94, 94),\n                         y2 = c(35, 60))\n\n# Saudi failed clearance, Gazinsky header\nball_data <- data.frame(x = c(94, 94),\n                        y = c(35, 60),\n                        x2 = c(82, 99.2),\n                        y2 = c(33.5, 47.5))\n\n# soccer ball image\ngoal_img <- data.frame(x = 100,\n                       y = 47) %>% \n  mutate(image = \"https://d30y9cdsu7xlg0.cloudfront.net/png/43563-200.png\")\n\n# golovin + zhirkov movement\nmovement_data <- data.frame(x = c(83, 98),\n                            y = c(24.25, 2),\n                            x2 = c(77, 88),\n                            y2 = c(21, 6))\n\ng <- ggplot(pass_data) +\n  annotate_pitch() +\n  geom_segment(aes(x = x, y = y, xend = x2, yend = y2),\n               arrow = arrow(length = unit(0.25, \"cm\"),\n                             type = \"closed\")) +\n  geom_segment(data = ball_data,\n               aes(x = x, y = y, xend = x2, yend = y2), \n               linetype = \"dashed\", size = 0.85,\n               color = c(\"black\", \"red\")) +\n  geom_segment(data = movement_data,\n               aes(x = x, y = y, xend = x2, yend = y2), \n               linetype = \"dashed\", size = 1.2,\n               color = \"darkgreen\") +\n  geom_curve(data = curve_data, \n             aes(x = x, y = y, xend = x2, yend = y2), \n             curvature = 0.25, \n             arrow = arrow(length = unit(0.25, \"cm\"),\n                           type = \"closed\")) +\n  # geom_image(data = goal_img,\n  #            aes(x = x, y = y,\n  #                image = image), \n  #            size = 0.035) +\n  theme_pitch() + \n  theme(text = element_text(family = \"Trebuchet MS\")) +\n  coord_flip(xlim = c(49, 101),\n             ylim = c(-1, 101)) +\n  ggtitle(label = \"Russia (5) vs. (0) Saudi Arabia\", \n          subtitle = \"First goal, Yuri Gazinsky (12th Minute)\") +\n  labs(caption = \"By Ryo Nakagawara (@R_by_Ryo)\") +\n  geom_label(aes(x = 94, y = 60, label = \"Gazinsky\"), hjust = -0.1) +\n  geom_label(aes(x = 83, y = 23, label = \"Golovin\"), hjust = -0.05) +\n  geom_label(aes(x = 75, y = 11, label = \"Golovin\"), hjust = -0.1) +\n  geom_label(aes(x = 98, y = 0, label = \"Zhirkov\"), vjust = -0.3) +\n  geom_label(aes(x = 84, y = 6, label = \"Zhirkov\"), vjust = -0.3) +\n  annotate(\"text\", x = 69, y = 65, family = \"Trebuchet MS\",\n           label = \"After a poor corner kick clearance\\n from Saudi Arabia, Golovin picks up the loose ball, \\n exchanges a give-and-go pass with Zhirkov\\n before finding Gazinsky with a beautiful cross!\")\n\nggsave(g, filename = \"gazinsky_goal.png\", height = 6, width = 8)",
    "created" : 1531275130102.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1666679116",
    "id" : "8D57EB23",
    "lastKnownWriteTime" : 1531295466,
    "last_content_update" : 1531295466313,
    "path" : "~/R_Projects/interestingR/Rfile/worldcup.R",
    "project_path" : "Rfile/worldcup.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}